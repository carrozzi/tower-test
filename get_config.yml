---
- name: Get Device Facts
  hosts: all
  roles:
  - Juniper.junos 
  connection: local
  gather_facts: no

  tasks:
  - name: Checking NETCONF connectivity
    wait_for: host={{ inventory_hostname }} port=830 timeout=5

  - name: Get Junos Configuration
    junos_rpc:
       host: "{{ inventory_hostname }}"
       rpc: get-config
       dest: "{{ inventory_hostname }}.conf"
       user: root
       passwd: Gestalt7

  - name: Print commit comment
    debug: msg="{{ mycomment }}"
